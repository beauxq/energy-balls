(()=>{"use strict";var t=[function(){return[]},function(t,n,i,s,e,a){return[[n,i-s*(t[3]-e)/(t[3]-t[1]),n-s*(t[3]-e)/(t[3]-t[2]),i]]},function(t,n,i,s,e,a){return[[n-s,i-s*(t[2]-e)/(t[2]-t[0]),n-s*(e-t[3])/(t[2]-t[3]),i]]},function(t,n,i,s,e,a){return[[n-s,i-s*(t[2]-e)/(t[2]-t[0]),n,i-s*(t[3]-e)/(t[3]-t[1])]]},function(t,n,i,s,e,a){var h=i-s*(e-t[3])/(t[1]-t[3]);return[[n-s*(t[1]-e)/(t[1]-t[0]),i-s,n,h]]},function(t,n,i,s,e,a){return[[n-s*(t[1]-e)/(t[1]-t[0]),i-s,n-s*(t[3]-e)/(t[3]-t[2]),i]]},function(t,n,i,s,e,a){var h=n-s*(t[1]-e)/(t[1]-t[0]),o=n-s*(e-t[3])/(t[2]-t[3]),r=i-s*(t[2]-e)/(t[2]-t[0]),c=i-s*(e-t[3])/(t[1]-t[3]),u=s/2;return a(n-u,i-u)>e?[[h,i-s,n-s,r],[n,c,o,i]]:[[h,i-s,n,c],[n-s,r,o,i]]},function(t,n,i,s,e,a){var h=i-s*(t[2]-e)/(t[2]-t[0]);return[[n-s*(t[1]-e)/(t[1]-t[0]),i-s,n-s,h]]},function(t,n,i,s,e,a){var h=i-s*(e-t[2])/(t[0]-t[2]);return[[n-s*(e-t[1])/(t[0]-t[1]),i-s,n-s,h]]},function(t,n,i,s,e,a){var h=n-s*(e-t[1])/(t[0]-t[1]),o=n-s*(t[3]-e)/(t[3]-t[2]),r=i-s*(e-t[2])/(t[0]-t[2]),c=i-s*(t[3]-e)/(t[3]-t[1]),u=s/2;return a(n-u,i-u)>e?[[h,i-s,n,c],[n-s,r,o,i]]:[[h,i-s,n-s,r],[n,c,o,i]]},function(t,n,i,s,e,a){return[[n-s*(e-t[1])/(t[0]-t[1]),i-s,n-s*(e-t[3])/(t[2]-t[3]),i]]},function(t,n,i,s,e,a){var h=i-s*(t[3]-e)/(t[3]-t[1]);return[[n-s*(e-t[1])/(t[0]-t[1]),i-s,n,h]]},function(t,n,i,s,e,a){return[[n-s,i-s*(e-t[2])/(t[0]-t[2]),n,i-s*(e-t[3])/(t[1]-t[3])]]},function(t,n,i,s,e,a){return[[n-s,i-s*(e-t[2])/(t[0]-t[2]),n-s*(t[3]-e)/(t[3]-t[2]),i]]},function(t,n,i,s,e,a){return[[n,i-s*(e-t[3])/(t[1]-t[3]),n-s*(e-t[3])/(t[2]-t[3]),i]]},function(){return[]}];const n=function(){function t(t,n,i,s,e){this.radius2=t,this.x=n,this.y=i,this.dx_ms=s,this.dy_ms=e}return t.prototype.update=function(t,n,i){this.x+=t*this.dx_ms,this.x>n?(this.x=n,this.dx_ms=-Math.abs(this.dx_ms)):this.x<0&&(this.x=0,this.dx_ms=Math.abs(this.dx_ms)),this.y+=t*this.dy_ms,this.y>i?(this.y=i,this.dy_ms=-Math.abs(this.dy_ms)):this.y<0&&(this.y=0,this.dy_ms=Math.abs(this.dy_ms))},t}(),i=function(){function i(t,n){var i=this;this.canvas=document.getElementById("c"),this.canvas.width=t,this.canvas.height=n,this.context=this.canvas.getContext("2d"),this.canvas.addEventListener("click",(function(t){console.log("click: "+t.x+" "+t.y)})),this.lastT=0,this.balls=[],this.makeBalls(),requestAnimationFrame((function(t){i.draw(t)}))}return i.prototype.makeBalls=function(){var t=Math.floor(Math.min(12,Math.max(4,this.canvas.width*this.canvas.height/15e4+2)));console.log(t+" balls");for(var i=t;i>0;--i)this.balls.push(new n(Math.pow(Math.random()*Math.min(this.canvas.height,this.canvas.width)/6+17,2),Math.random()*this.canvas.width,Math.random()*this.canvas.height,.04*Math.random(),.04*Math.random()))},i.prototype.resize=function(t,n){this.canvas.width=t,this.canvas.height=n,this.context=this.canvas.getContext("2d")},i.prototype.draw=function(n){var i=this,s=n-this.lastT;s>500&&(s=0),this.lastT=n;for(var e=0,a=this.balls;e<a.length;e++)a[e].update(s,this.canvas.width,this.canvas.height);for(var h=function(t,n){for(var s=0,e=0,a=i.balls;e<a.length;e++){var h=a[e],o=t-h.x,r=n-h.y;s+=h.radius2/(o*o+r*r)}return s},o=this.canvas.width/8+1,r=this.canvas.height/8+1,c=[],u=0;u<o;++u){var d=8*u,v=0;c.push(h(d,v))}this.context.clearRect(0,0,this.canvas.width,this.canvas.height);for(var l=1;l<r;++l){var f=[h(0,v=8*l)];for(u=1;u<o;++u){d=8*u,f.push(h(d,v));var m=[c[u-1],c[u],f[u-1],f[u]],w=t[+(m[0]>1)<<3|+(m[1]>1)<<2|+(m[2]>1)<<1|+(m[3]>1)](m,d,v,8,1,h),x=Math.floor(255*d/this.canvas.width);this.context.strokeStyle="rgb(0, "+(255-x)+", "+x+")",this.context.lineWidth=3,w.forEach((function(t){i.context.beginPath(),i.context.moveTo(t[0],t[1]),i.context.lineTo(t[2],t[3]),i.context.stroke()}))}c=f}requestAnimationFrame((function(t){i.draw(t)}))},i}();var s;window.onload=function(){var t=window.innerWidth,n=window.innerHeight;s=new i(t,n)},window.addEventListener("resize",(function(){console.log("browserZoomLevel: "+window.devicePixelRatio);var t=window.innerWidth,n=Math.max(window.innerHeight,document.documentElement.clientHeight);null==s||s.resize(t,n)}),!1),window.onorientationchange=function(){var t=document.getElementsByTagName("html")[0],n=document.getElementsByTagName("body")[0];window.innerWidth<window.innerHeight?(t.style.overflowX="hidden",n.style.overflowX="hidden"):(t.style.overflowX="auto",n.style.overflowX="auto")}})();